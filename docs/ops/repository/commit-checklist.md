---
title: "Crucible Commit Checklist"
status: "approved"
author: "Pipeline Architect"
last_updated: "2025-10-17"
category: "ops/repository"
---

# Crucible Commit Checklist

**Purpose**: Crucible-specific pre-commit workflow ensuring SSOT synchronization to language wrappers and quality gate compliance.

**Scope**: This checklist is specific to Crucible repository operations. For general FulmenHQ commit standards, see [Repository Operations SOP](../../sop/repository-operations-sop.md).

---

## Pre-Commit Workflow

### 1. Review Changes

```bash
git status
git diff
```

**Verify**:

- [ ] Changes are intentional and complete
- [ ] No secrets or credentials in staged files
- [ ] No `.plans/` files accidentally uncommitted (they're gitignored)

### 2. Run Quality Gates (REQUIRED)

```bash
make precommit
```

**This runs**:

- Schema validation
- SSOT sync to language wrappers (`lang/go`, `lang/typescript`, `lang/python`)
- Linting (TypeScript, Python, Go, YAML)
- Formatting (Markdown, JSON, YAML, code)
- All test suites
- Type checking

**Verify**:

- [ ] All quality gates pass (exit code 0)
- [ ] No test failures
- [ ] No linting errors
- [ ] Formatting applied successfully

### 3. Check SSOT Synchronization

**CRITICAL FOR CRUCIBLE**: Changes to root `docs/`, `schemas/`, or `config/` MUST sync to language wrappers.

```bash
git status
```

**Verify**:

- [ ] Changes in `docs/` appear in `lang/*/docs/`
- [ ] Changes in `schemas/` appear in `lang/*/schemas/`
- [ ] Changes in `config/` appear in `lang/*/config/`
- [ ] Synced files show in git status as modified

**If sync didn't run or files missing**:

```bash
make sync
git status  # Verify sync completed
```

### 4. Stage All Files

**IMPORTANT**: Stage ALL modified files including synced language wrappers.

```bash
git add .
```

**Or selectively (if needed)**:

```bash
git add docs/ schemas/ config/
git add lang/go/docs/ lang/go/schemas/ lang/go/config/
git add lang/typescript/docs/ lang/typescript/schemas/ lang/typescript/config/
git add lang/python/docs/ lang/python/schemas/ lang/python/config/
```

**Verify**:

- [ ] All intended files staged
- [ ] Run `git status` to confirm

### 5. Review Staged Changes

```bash
git diff --staged
```

**Verify**:

- [ ] Staged changes match intent
- [ ] No unexpected file modifications
- [ ] Synced files match root changes

### 6. Craft Commit Message

**Follow**:

- [Agentic Attribution Standard](../../standards/agentic-attribution.md) - Required trailers
- [Commit Message Style](../../sop/repository-operations-sop.md#commit-message-style) - Concise, scannable format

**Structure**:

```
<type>: <concise summary ≤50 chars>

<paragraph explaining what and why, wrapped at 72 chars>

<verification notes if applicable>

Generated by Pipeline Architect ([Claude Code](https://claude.com/claude-code)) under supervision of @3leapsdave

Co-Authored-By: Pipeline Architect <noreply@3leaps.net>
Committer-of-Record: Dave Thompson <dave.thompson@3leaps.net> [@3leapsdave]
```

**Checklist**:

- [ ] Subject line ≤50 characters
- [ ] Body uses paragraph format (not emoji sections)
- [ ] Includes what changed and why
- [ ] Attribution trailers complete
- [ ] Agent identity from MAINTAINERS.md
- [ ] Email domain is `noreply@3leaps.net`

### 7. Commit

```bash
git commit
```

**Verify**:

- [ ] Commit succeeded (exit code 0)
- [ ] Run `git status` - working tree should be clean
- [ ] Run `git log -1 --stat` to review commit

### 8. Post-Commit Verification

```bash
git status
git log -1 --format=fuller
```

**Verify**:

- [ ] Working tree is clean (no unstaged files)
- [ ] Commit message formatted correctly
- [ ] All expected files in commit
- [ ] Attribution trailers present

---

## Quick Reference

**Minimum Required Steps**:

1. `make precommit` (includes sync, format, lint, test)
2. `git status` (verify sync completed)
3. `git add .` (stage all including synced files)
4. `git commit` (with proper attribution)
5. `git status` (verify clean state)

---

## Common Issues

### Sync Didn't Run

**Symptom**: `git status` doesn't show `lang/*/` files modified

**Fix**:

```bash
make sync
git status  # Verify files now appear
git add .
```

### Formatting Changed Files After Staging

**Symptom**: Files modified after `git add`

**Fix**: This is normal - `make precommit` formats then you stage

```bash
make precommit  # Formats files
git add .       # Stage formatted files
```

### Unstaged Files After Commit

**Symptom**: `git status` shows modified files after commit

**Fix**: You missed synced files or formatter ran

```bash
git status           # Review what's unstaged
git add .            # Stage remaining files
git commit --amend   # Amend commit (check authorship first!)
```

---

## Related Documentation

- [Repository Operations SOP](../../sop/repository-operations-sop.md) - Global standards
- [Agentic Attribution Standard](../../standards/agentic-attribution.md) - Commit message requirements
- [Makefile Standard](../../standards/makefile-standard.md) - Available targets
- [AGENTS.md](../../../AGENTS.md) - Session startup and agent protocols
- [Release Checklist](./release-checklist.md) - Full release workflow

---

**Status**: Approved
**Last Updated**: 2025-10-17
**Author**: Pipeline Architect
**Effective Date**: 2025-10-17
