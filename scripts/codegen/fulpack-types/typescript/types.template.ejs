/**
 * Fulpack Types - Generated from Crucible schemas.
 *
 * This file is AUTO-GENERATED from the Fulpack module specification.
 * DO NOT EDIT MANUALLY - changes will be overwritten.
 *
 * Schema Version: <%- version %>
 * Last Reviewed: <%- last_reviewed %>
 * Source: schemas/library/fulpack/v1.0.0/
 *
 * See: https://github.com/fulmenhq/crucible/blob/main/docs/standards/library/modules/fulpack.md
 */

// ============================================================================
// Enums (TypeScript Enums)
// ============================================================================

<% taxonomies.forEach(taxonomy => { %>
/**
 * <%- taxonomy.description %>
 * @see schemas/taxonomy/library/fulpack/<%- taxonomy.path %>
 */
export enum <%- taxonomy.className %> {
<% taxonomy.items.forEach((item, index) => { %><% if (item.description) { %>  /** <%- item.description %> */
<% } %>  <%- item.constant_name %> = "<%- item.id %>",
<% }); %>}

<% }); %>
// ============================================================================
// Structured Error Types
// ============================================================================

/**
 * Structured error context for fulpack operations.
 * Enables programmatic error handling and observability.
 *
 * @see docs/standards/library/modules/fulpack.md
 */
export interface FulpackError {
  /**
   * Canonical error code for programmatic handling.
   * Examples: "PATH_TRAVERSAL", "DECOMPRESSION_BOMB", "ABSOLUTE_PATH", "SYMLINK_ESCAPE"
   */
  readonly code: string;

  /**
   * Human-readable error message describing what went wrong.
   */
  readonly message: string;

  /**
   * Operation that generated this error.
   */
  readonly operation: Operation;

  /**
   * Entry path that caused the error (if applicable).
   * Example: "../../../etc/passwd"
   */
  readonly path?: string;

  /**
   * Archive file path being processed.
   */
  readonly archive?: string;

  /**
   * Source file path for create operations.
   */
  readonly source?: string;

  /**
   * Additional structured context for debugging and telemetry.
   */
  readonly details?: {
    /** Entry index in archive (0-based) */
    readonly entry_index?: number;
    /** Compression ratio that triggered bomb detection */
    readonly compression_ratio?: number;
    /** Actual decompressed size in bytes */
    readonly actual_size?: number;
    /** Maximum allowed size in bytes */
    readonly max_size?: number;
    /** Maximum allowed entries */
    readonly max_entries?: number;
    /** Actual entry count */
    readonly entry_count?: number;
    /** Additional context (extensible) */
    readonly [key: string]: unknown;
  };
}

// ============================================================================
// Data Structures (Interfaces)
// ============================================================================

<% data_structures.forEach(schema => { %>
/**
 * <%- schema.description %>
 * @see schemas/library/fulpack/v1.0.0/<%- schema.filename %>
 */
export interface <%- schema.className %> {
<% schema.required_properties.forEach(prop => { %><%
  // Override errors field to use FulpackError[] for ValidationResult and ExtractResult
  let fieldType = prop.typescript_type;
  if (prop.name === 'errors' && (schema.className === 'ValidationResult' || schema.className === 'ExtractResult')) {
    fieldType = 'FulpackError[]';
  }
%>  readonly <%- prop.name %>: <%- fieldType %>;<% if (prop.description) { %> // <%- prop.description %><% } %>
<% }); %><% schema.optional_properties.forEach(prop => { %><%
  // Override errors field to use FulpackError[] for ValidationResult and ExtractResult
  let fieldType = prop.typescript_type;
  if (prop.name === 'errors' && (schema.className === 'ValidationResult' || schema.className === 'ExtractResult')) {
    fieldType = 'FulpackError[]';
  }
%>  readonly <%- prop.name %>?: <%- fieldType %>;<% if (prop.description) { %> // <%- prop.description %><% } %>
<% }); %>}

<% }); %>
// ============================================================================
// Options (Partial Interfaces)
// ============================================================================

<% options.forEach(schema => { %>
/**
 * <%- schema.description %>
 * @see schemas/library/fulpack/v1.0.0/<%- schema.filename %>
 *
 * All fields are optional. Use when calling functions.
 */
export interface <%- schema.className %> {
<% schema.properties.forEach(prop => { %>  <%- prop.name %>?: <%- prop.typescript_type %>;<% if (prop.description) { %> // <%- prop.description %><% } %>
<% }); %>}

<% }); %>
// ============================================================================
// Module Metadata
// ============================================================================

/**
 * Module version for compatibility checks.
 */
export const FULPACK_VERSION = "<%- version %>";
