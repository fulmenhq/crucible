# v0.4.10 - 3leaps/crucible Sync & Release Engineering Role

Brings galaxy-level data classification frameworks and release engineering infrastructure to the Fulmen ecosystem, adding the `releng` agentic role for orchestrating releases with CI/CD validation. Includes v0.1.6 update from upstream with enhanced role categories and improved documentation clarity.

## Highlights

- **Documentation Improvements**: Clear distinction between fulmenhq/crucible and 3leaps/crucible repositories
- **Updated Upstream (v0.1.6)**: Latest schemas with expanded role categories (analytics, consulting, marketing)
- **Data Classification Framework**: 7 enterprise-grade classifier dimensions for data governance
- **Foundation Schemas**: Universal type primitives used across all FulmenHQ tools
- **Automated Upstream Sync**: One-command sync from 3leaps/crucible with validation
- **Release Engineering Role**: CI/CD-aware release coordination with quality gate enforcement
- **Provenance Tracking**: Audit trail for all vendored upstream content

## Documentation Improvements

Enhanced agent-facing documentation to prevent confusion between the two crucible repositories:

**AGENTS.md Updates**:

- New "Repository Relationship" section explaining fulmenhq/crucible vs 3leaps/crucible
- Added `make upstream-sync-3leaps` to Quick Reference table
- Enhanced DO/DO NOT section with explicit upstream sync guidance
- Links to [Upstream Sync Consumer Guide](docs/ops/upstream-sync-consumer.md)

**Architecture Documentation**:

- Added bidirectional relationship context to `docs/architecture/sync-model.md`
- Clarifies consumer (from 3leaps) vs producer (to downstream) roles

**Operations Documentation**:

- Added upstream sync to high-risk operations table in `docs/sop/repository-operations-sop.md`
- Includes protocol for reviewing upstream changes and handling breaking changes

**Makefile Clarity**:

- Added informative comments to `upstream-sync-3leaps` target
- Explains vendored content destination

## 3leaps/crucible Upstream Sync

### Purpose

Crucible now has automated tooling to pull schemas, standards, and documentation from the galaxy-level 3leaps/crucible repository. This enables:

1. **Consistency**: All FulmenHQ projects use the same base schemas
2. **Provenance**: Clear audit trail for vendored content
3. **Validation**: Automated format/lint checks before accepting upstream changes
4. **Extensibility**: Ready for multi-repo upstream support

### Upstream Sync Tooling

**Script** (`scripts/3leaps-crucible-upstream-pull.ts`):

- Bun/TypeScript implementation with dry-run support
- Pulls from local 3leaps/crucible checkout
- Copies to `schemas/upstream/3leaps/crucible/`
- Mirrors source structure: `schemas/`, `config/`, `docs/` subdirectories
- Updates PROVENANCE.md with source tag, commit, and date

**Make Targets**:

```bash
make upstream-sync-3leaps    # Sync and validate in one command
make upstream-check          # Check upstream content for format/lint issues (no auto-fix)
make upstream-validate       # Validate vendored schemas against meta-schemas
```

### Directory Structure

```
schemas/upstream/
└── 3leaps/
    └── crucible/           # Clear provenance: <org>/<repo>/
        ├── schemas/          # JSON schemas
        ├── config/          # Configuration catalogs
        ├── docs/            # Documentation
        └── PROVENANCE.md    # Audit trail
```

This hierarchical structure enables future multi-repo upstream support (e.g., `schemas/upstream/external/library-name/`).

### Upstream Source

- **Repository**: `git@github.com:3leaps/crucible.git`
- **Current Tag**: v0.1.6
- **Commit**: e2812cd84cec
- **Local Path**: `/Users/davethompson/dev/3leaps/crucible`

### Changes in v0.1.6

- **Enhanced Role Categories**: role-prompt.schema.json now includes:
  - `analytics` - Data analysis and insights roles
  - `consulting` - Advisory and strategic guidance roles
  - `marketing` - Content and outreach roles
  - (In addition to existing: agentic, automation, governance, review)

- **Documentation**: Added README.md to `schemas/agentic/v0/` with usage guidance

- **Provenance**: Updated to track v0.1.6 (commit e2812cd84cec)

## Data Classification Framework

From 3leaps/crucible v0.1.6, this release adds enterprise-grade classification frameworks for data governance.

### Why This Matters

Compliance frameworks (GDPR, SOC2, HIPAA) require systematic classification of data assets. These 7 dimensions provide the building blocks for implementing data governance across the Fulmen ecosystem:

- **Sensitivity**: What happens if this data is leaked?
- **Volatility**: How often does this data change?
- **Access Tier**: Who can see this data?
- **Retention Lifecycle**: How long must we keep it?
- **Schema Stability**: How often does the structure change?
- **Volume Tier**: How much data are we dealing with?
- **Velocity Mode**: Batch, streaming, or hybrid processing?

### Classifier Dimensions

**7 Dimension Definitions** (`config/classifiers/dimensions/`):

| Dimension             | File                       | Levels                                                           |
| --------------------- | -------------------------- | ---------------------------------------------------------------- |
| `sensitivity`         | `sensitivity.yaml`         | UNKNOWN, PUBLIC, INTERNAL, CONFIDENTIAL, RESTRICTED, 6-eyes-only |
| `volatility`          | `volatility.yaml`          | static, low, moderate, high, streaming                           |
| `access-tier`         | `access-tier.yaml`         | public, internal, restricted, eyes-only                          |
| `retention-lifecycle` | `retention-lifecycle.yaml` | transient, short-term, medium-term, long-term, legal-hold        |
| `schema-stability`    | `schema-stability.yaml`    | experimental, draft, stable, frozen, deprecated                  |
| `volume-tier`         | `volume-tier.yaml`         | tiny, small, medium, large, massive                              |
| `velocity-mode`       | `velocity-mode.yaml`       | batch, streaming, hybrid                                         |

### Meta-Schemas

**Classification Meta-Schemas** (`schemas/classifiers/v0/`):

- `dimension-definition.schema.json` - Meta-schema for classifier dimensions
- `sensitivity-level.schema.json` - Sensitivity enum schema with constraints

### Classification Standards

**8 Standards** (`docs/standards/`):

- `data-sensitivity-classification.md` - Sensitivity decision tree
- `volatility-classification.md` - Update cadence guidelines
- `access-tier-classification.md` - Distribution control policies
- `retention-lifecycle-classification.md` - Retention requirements
- `schema-stability-classification.md` - Schema evolution stages
- `volume-tier-classification.md` - Data scale planning
- `velocity-mode-classification.md` - Processing pattern selection
- `classifiers-framework.md` - Cross-dimension usage patterns

Each standard includes:

- Decision trees for classification
- Handling matrices by dimension
- Operational guidance
- Cross-references to compliance frameworks

### Policy Stance

**Missing Classification is an Error**: All data assets must have explicit classification. Use `unknown` if classification is pending—do not omit classification fields.

### Classifiers Catalog

**Documentation** (`docs/catalog/classifiers/`):

- Overview of all 7 dimensions
- Usage examples and patterns
- Cross-dimension combinations
- Tooling recommendations

## Foundation Schemas

From 3leaps/crucible v0.1.6, universal type primitives used across all FulmenHQ tools.

### Schemas

**types.schema.json**: 25 portable type definitions

- `slug` - URL-friendly identifiers
- `semver` - Semantic versioning strings
- `timestamp` - ISO 8601 timestamps
- `url` - Uniform Resource Locators
- `path`, `absolute_path`, `relative_path` - File system paths
- `email`, `uuid`, `hostname` - Standard formats
- And more...

**error-response.schema.json**: Standard error structure for APIs and CLIs

- `code` - Machine-readable error code
- `message` - Human-readable error message
- `details` - Structured error context
- `request_id` - Correlation identifier

**lifecycle-phases.schema.json**: Project maturity phases

- experimental, alpha, beta, stable, lts, deprecated

**release-phase.schema.json**: Release cadence

- dev, rc, ga, hotfix

## Release Engineering Role

### Purpose

The `releng` role orchestrates releases while ensuring CI/CD quality. Key distinction from `cicd`:

- **releng** = "Should we release? What version? Is everything validated?"
- **cicd** = "How do we build? What runners? What workflow syntax?"

### Role Definition

**File**: `config/agentic/roles/releng.yaml`

**Scope**:

- Version management (semantic versioning enforcement)
- Changelog maintenance
- Release notes authoring
- Tag and branch management
- Release coordination across repos
- CI/CD workflow validation before push
- Platform matrix enforcement
- Runner availability verification

### Pre-Push Checklist

Before pushing any release, `releng` must:

1. Run actionlint on all modified workflows
2. Run shellcheck on shell scripts in workflows
3. Verify runners are not deprecated
4. Confirm platform matrix matches project standards
5. Ensure local and remote are in sync
6. Run project's prepush target (e.g., `make prepush`)

### Required Reading

Before starting any release work:

1. Read project's `Makefile` - Understand available targets and sync patterns
2. Read `RELEASE_CHECKLIST.md` - Follow the release procedure step-by-step

### Escalation Paths

- **Major version releases** → human maintainers
- **Breaking changes** → human maintainers (requires communication)
- **Platform support changes** → human maintainers
- **Secrets or credentials** → secrev role
- **Pipeline execution details** → cicd role
- **Cross-ecosystem coordination** → entarch role

### Example Commit

```bash
chore(release): prepare v1.2.0 release

Bump version to 1.2.0 and update changelog.

Changes:
- Update version in VERSION file
- Add v1.2.0 section to CHANGELOG.md
- Verify all workflows pass actionlint

Generated by Claude Opus 4.5 via Claude Code under supervision of @3leapsdave

Co-Authored-By: Claude Opus 4.5 <noreply@3leaps.net>
Role: releng
Committer-of-Record: Dave Thompson <dave.thompson@3leaps.net> [@3leapsdave]
```

## Changes

### Upstream Content Location

**Before**: Flat structure

```
schemas/upstream/3leaps/
├── ailink/
└── agentic/
```

**After**: Hierarchical structure

```
schemas/upstream/3leaps/
└── crucible/
    ├── schemas/
    ├── config/
    └── docs/
```

**Benefits**:

- Clear provenance: `<org>/<repo>/`
- Future multi-repo upstream support
- Consistent with PROVENANCE.md tracking

### Removed

**Legacy Role-Prompt Schema**: `schemas/upstream/3leaps/crucible/schemas/agentic/v0/role-prompt.schema.json`

- Role definitions now sourced from 3leaps/crucible upstream
- Local vendored schema no longer needed
- Role prompts live in `config/agentic/roles/*.yaml` (SSOT)

## Background

**3leaps/crucible** is the galaxy-level standards repository for the 3 Leaps organization. It provides schemas, standards, and documentation that multiple FulmenHQ projects consume:

- Crucible: Syncs to `schemas/upstream/3leaps/crucible/`
- Future: Other 3 Leaps projects can be synced to `schemas/upstream/<org>/<repo>/`

This sync infrastructure ensures consistency while maintaining clear provenance for all vendored content.

## Migration Guide

For Downstream Consumers:

1. **Review classifier dimensions** in `config/classifiers/dimensions/`
2. **Adopt classification standards** from `docs/standards/`
3. **Use foundation schemas** (`types.schema.json`, `error-response.schema.json`) for type safety
4. **Sync releng role** to your agentic roles directory
5. **Update release workflows** to use `releng` for release orchestration

## References

- Upstream: `git@github.com:3leaps/crucible.git` (v0.1.6, e2812cd84cec)
- Sync script: `scripts/3leaps-crucible-upstream-pull.ts`
- Releng role: `config/agentic/roles/releng.yaml`
- Classifiers framework: `docs/standards/classifiers-framework.md`
- Foundation schemas: `schemas/foundation/v1.0.0/`
- Upstream sync consumer guide: `docs/ops/upstream-sync-consumer.md`
