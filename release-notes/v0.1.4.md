# Release Notes: 2025.10.5

**Date:** 2025-10-29

Critical structural release relocating Go module to repository root, enabling standard external installation and unblocking gofulmen v0.1.6 for external consumers. This establishes an asymmetric language pattern (Go at root, Python/TypeScript in lang/) following industry best practices.

## Highlights

- **Go Module Root Relocation**: Moved Go module from `lang/go/` to repository root enabling standard `go get github.com/fulmenhq/crucible` installation
- **Direct SSOT Embedding**: Go now embeds schemas/docs/config directly from root via `//go:embed` directives, eliminating sync overhead
- **Asymmetric Language Structure**: Industry-standard pattern (Go at root, others in `lang/`) documented in ADR-0009
- **External Installation Enabled**: Unblocks gofulmen v0.1.6 and external Go module consumers (forge-workhorse-groningen, etc.)
- **Comprehensive Documentation**: ADR-0009, breadcrumb README, updated repository structure SOP

## Breaking Changes

### For External Go Consumers

**BREAKING**: Go module location changed from `lang/go/` to repository root.

**Before (v2025.10.4 and earlier)**:

```go
// go.mod with replace directive
require github.com/fulmenhq/crucible v2025.10.4
replace github.com/fulmenhq/crucible => ../crucible/lang/go
```

**After (v2025.10.5+)**:

```go
// go.mod - standard module reference
require github.com/fulmenhq/crucible v2025.10.5
// No replace directive needed!
```

**Migration Steps**:

1. Update `go.mod` to require v2025.10.5
2. Remove any `replace github.com/fulmenhq/crucible` directives
3. Run `go mod tidy`
4. Test: `go get github.com/fulmenhq/crucible@v2025.10.5`

**Import paths unchanged**: `import "github.com/fulmenhq/crucible"` works as before.

### For Crucible Contributors

**Repository structure changed**:

- Go sources now at root: `*.go`, `go.mod`, `go.sum`
- `lang/go/` now contains only breadcrumb README.md explaining relocation
- Python/TypeScript unchanged in `lang/python/` and `lang/typescript/`

**Development workflow**:

- Go commands run from root: `go test ./...`, `go build ./...`
- Makefile updated: `make test-go`, `make build-go` work from root
- GitHub Actions updated: test-go.yml no longer uses `working-directory`

## For Downstream Consumers

### gofulmen Developers

**This release unblocks gofulmen v0.1.6** with standard external installation.

**Update gofulmen/go.mod**:

```go
require github.com/fulmenhq/crucible v2025.10.5
// Remove: replace github.com/fulmenhq/crucible => ../crucible/lang/go
```

**Test external installation**:

```bash
cd /tmp
go mod init test
go get github.com/fulmenhq/gofulmen@latest  # Now works!
```

See [gofulmen issue tracking](https://github.com/fulmenhq/gofulmen) for v0.1.6 release coordination.

### forge-workhorse-groningen Templates

**Standard Go workflow now enabled**:

- No local Crucible clone required
- No replace directives needed
- Standard `go get` installation works immediately

### Python/TypeScript Consumers

**No impact**:

- Python package unchanged: `fulmenhq-crucible==2025.10.5`
- TypeScript package unchanged: `@fulmenhq/crucible@2025.10.5`
- All imports, APIs, and workflows identical

## Technical Details

### Repository Structure Changes

**Before v2025.10.5**:

```
crucible/
├── lang/
│   ├── go/           # Go module HERE
│   │   ├── go.mod
│   │   ├── *.go
│   │   ├── schemas/  # Synced copy
│   │   ├── docs/     # Synced copy
│   │   └── config/   # Synced copy
│   ├── python/
│   └── typescript/
├── schemas/          # SSOT
├── docs/             # SSOT
└── config/           # SSOT
```

**After v2025.10.5**:

```
crucible/
├── go.mod            # Go module at ROOT
├── go.sum
├── *.go              # Go sources at ROOT
├── schemas/          # SSOT (Go embeds directly)
├── docs/             # SSOT (Go embeds directly)
├── config/           # SSOT (Go embeds directly)
└── lang/
    ├── go/           # Breadcrumb README only
    ├── python/       # Unchanged (synced)
    └── typescript/   # Unchanged (synced)
```

### Embed Directive Changes

**Before**: Navigate up from `lang/go/`:

```go
//go:embed ../../schemas  // Fragile path-dependent
//go:embed ../../docs
```

**After**: Clean root-relative paths:

```go
//go:embed schemas  // Direct SSOT access
//go:embed docs
```

### Sync Process Changes

**Before**: `scripts/sync-to-lang.ts` synced to all three languages including Go

**After**: Go sync removed (embeds directly from root)

- Python sync: ✅ Still runs (copies to `lang/python/`)
- TypeScript sync: ✅ Still runs (copies to `lang/typescript/`)
- Go sync: ⛔ Removed (embeds directly via `//go:embed`)

### Makefile Updates

**Before**:

```makefile
test-go:
	@cd lang/go && go test ./...
build-go:
	@cd lang/go && go build ./...
```

**After**:

```makefile
test-go:
	@go test ./...
build-go:
	@go build ./...
```

### GitHub Actions Updates

**`.github/workflows/test-go.yml`**:

- Removed: `working-directory: ./lang/go`
- Now runs from repository root like standard Go modules

## Architectural Decision

**See [ADR-0009](../docs/architecture/decisions/ADR-0009-go-module-root-relocation.md)** for complete rationale including:

- **Why asymmetric?** Go embed requirements vs. Python/TypeScript packaging needs
- **Industry precedent**: Terraform, Kubernetes, NATS, etcd use same pattern
- **Alternatives considered**: Separate repo, subdirectory with replace directives, Go workspaces
- **Trade-offs accepted**: Asymmetric structure vs. external installation support

### SSOT Discipline Preserved

**Root directories remain authoritative**:

- `schemas/` - Version-controlled JSON schemas (SSOT)
- `docs/` - Standards, architecture, guides (SSOT)
- `config/` - Configuration catalogs (SSOT)

**Language implementations**:

- Go: Embeds directly from root SSOT (no intermediate copies)
- Python: Syncs to `lang/python/` (packaged with pip)
- TypeScript: Syncs to `lang/typescript/` (packaged with npm)

**Golden Rule**: Never edit `lang/python/` or `lang/typescript/` directly—edit root SSOT and run `make sync`.

## Validation

**All quality gates passed**:

- ✅ Go tests: 18/18 passed
- ✅ TypeScript tests: 12/12 passed
- ✅ Python tests: 10/10 passed
- ✅ Embed verification: Schemas/docs loading correctly from root
- ✅ Schema validation: All schemas valid
- ✅ Lint: Go, TypeScript, Python all passed
- ✅ Typecheck: TypeScript type checking passed
- ✅ Precommit/prepush: All checks passed

## Documentation Updates

**New**:

- `docs/architecture/decisions/ADR-0009-go-module-root-relocation.md` - Complete architectural decision record
- `lang/go/README.md` - Breadcrumb with migration guide and rationale

**Updated**:

- `CHANGELOG.md` - Breaking change notice
- `README.md` - Language support section, directory structure, pseudo-monorepo strategy
- `docs/sop/repository-structure.md` - Asymmetric pattern documentation
- `.github/workflows/test-go.yml` - Remove working-directory
- `Makefile` - Go targets run from root
- `scripts/sync-to-lang.ts` - Remove Go sync, add explanatory note

## Migration Guide

### For gofulmen (Immediate)

1. Update `go.mod`:

   ```bash
   cd gofulmen
   go get github.com/fulmenhq/crucible@v2025.10.5
   # Edit go.mod to remove replace directive
   go mod tidy
   ```

2. Test build:

   ```bash
   go build ./...
   go test ./...
   ```

3. Release gofulmen v0.1.6 with updated dependency

### For Other Go Consumers

1. Update dependency version
2. Remove replace directives
3. Test external installation works
4. Update to v2025.10.5+

### For Crucible Contributors

1. Pull latest: `git pull origin main`
2. Go commands run from root (no `cd lang/go`)
3. Makefile targets work unchanged (`make test-go`)
4. See `lang/go/README.md` for detailed migration notes

## Next Steps

**Immediate**:

- gofulmen v0.1.6 release with Crucible v2025.10.5 dependency
- forge-workhorse-groningen can now use gofulmen without local clones

**Future**:

- Consider similar patterns for future languages if module system constraints arise
- Monitor external adoption and gather feedback on asymmetric structure

## Credits

**Architecture**: @fulmen-ea-steward
**Implementation**: Pipeline Architect (supervised by @3leapsdave)
**Review**: @3leapsdave, @fulmen-ea-steward

---

For questions or issues, see:

- [ADR-0009](../docs/architecture/decisions/ADR-0009-go-module-root-relocation.md)
- [lang/go/README.md](../lang/go/README.md)
- [CHANGELOG.md](../CHANGELOG.md)
