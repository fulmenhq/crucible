# Release Notes: v0.2.6

**Date**: 2025-11-05

Patch release addressing helper library feedback for signal handling implementation. Adds missing Foundry config accessors and platform introspection API documentation.

## Highlights

- **Missing Foundry Config Accessors Fixed**: Added `Signals()` and `ExitCodes()` methods to enable catalog loading
- **Platform Introspection API**: Documented `supports_signal()` requirement for runtime platform detection

## What's Fixed

### 1. Missing Foundry Config Accessors

**Issue**: gofulmen reported missing `Signals()` accessor method in `config.go`, preventing signal catalog loading from embedded Crucible assets.

**Root Cause**: When signal handling module was added in v0.2.5, the corresponding Foundry config accessor was not created. Existing accessors (Patterns, CountryCodes, HTTPStatuses, MIMETypes, SimilarityFixtures) followed a pattern, but Signals and ExitCodes were missing.

**Fix**: Added two new accessor methods to `FoundryConfig`:

```go
// ExitCodes returns the exit codes catalog
func (f *FoundryConfig) ExitCodes() ([]byte, error) {
    return configFS.ReadFile("config/library/foundry/exit-codes.yaml")
}

// Signals returns the signals catalog
func (f *FoundryConfig) Signals() ([]byte, error) {
    return configFS.ReadFile("config/library/foundry/signals.yaml")
}
```

**Test Coverage**: Added comprehensive tests mirroring existing catalog accessor patterns:

- Verify data loads without error
- Verify non-empty content
- Verify YAML structure contains expected keys

**Usage in Helper Libraries**:

```go
// gofulmen
import "github.com/fulmenhq/crucible"

data, err := crucible.ConfigRegistry.Library().Foundry().Signals()
// Parse and cache signal catalog
```

---

### 2. Platform Introspection API Documentation

**Issue**: pyfulmen and gofulmen teams requested explicit `supports_signal()` API requirement for runtime platform detection.

**Root Cause**: While the signal handling module standard documented platform support matrices and Windows fallback behaviors, it did not explicitly require a `supports_signal()` API function that helper libraries should expose.

**Fix**: Added "Platform Introspection" section to signal handling module standard with:

**API Contract**:

- **Go**: `SupportsSignal(sig os.Signal) bool`
- **Python**: `supports_signal(sig: signal.Signals) -> bool`
- **TypeScript**: `supportsSignal(sig: string) -> boolean`

**Purpose**:

- Enable applications to check signal support before registration
- Allow conditional logic based on platform capabilities
- Support cross-platform testing with deterministic behavior
- Enable dynamic capability reporting in documentation/help text

**Usage Examples**:

**Go**:

```go
if signals.SupportsSignal(syscall.SIGHUP) {
    signals.Handle(syscall.SIGHUP, reloadConfigHandler)
    log.Info("Config reload: send SIGHUP to reload")
} else {
    // Windows: HTTP endpoint fallback
    log.Info("Config reload: POST /admin/signal with signal=HUP")
}
```

**Python**:

```python
if signals.supports_signal(signal.SIGHUP):
    signals.handle(signal.SIGHUP, reload_config_handler)
    print("Config reload: kill -HUP <pid>")
else:
    # Windows: HTTP endpoint fallback
    print("Config reload: POST /admin/signal with signal=HUP")
```

**TypeScript**:

```typescript
if (signals.supportsSignal("SIGHUP")) {
  signals.handle("SIGHUP", reloadConfigHandler);
  console.log("Config reload: kill -HUP <pid>");
} else {
  // Windows: HTTP endpoint fallback
  console.log("Config reload: POST /admin/signal with signal=HUP");
}
```

**Implementation Note**: Check against platform support matrix in `signals.yaml`.

---

## Impact on Users

### For Helper Library Maintainers

**Immediate Action Required**:

1. **Update Crucible dependency to v0.2.6**:

   ```bash
   go get github.com/fulmenhq/crucible@v0.2.6
   ```

2. **Use new Signals() accessor**:

   ```go
   data, err := crucible.ConfigRegistry.Library().Foundry().Signals()
   // Parse signals.yaml and cache catalog
   ```

3. **Implement supports_signal() API**:
   - Add function matching language conventions
   - Check against platform support matrix from catalog
   - Return true for native signals, false for Windows fallback

### For Application Developers

**No Changes Required**: This is a Crucible SSOT update. Changes are transparent when helper libraries adopt v0.2.6.

**Future Benefit**: Once helper libraries implement `supports_signal()`, applications can conditionally register handlers based on platform capabilities.

---

## Breaking Changes

**None** - This release contains zero breaking changes:

- New accessors are additive (no existing API changes)
- Platform introspection API is new documentation (implementation pending in helper libraries)
- All existing code continues to work

---

## Validation

**All quality gates passed**:

- âœ… Go tests: All passed (including new accessor tests)
- âœ… TypeScript tests: All passed
- âœ… Python tests: All passed
- âœ… Schema validation: Complete
- âœ… Lint: All languages passed
- âœ… Format: All files formatted
- âœ… Typecheck: TypeScript passed
- âœ… Sync: Documentation synced to language wrappers

---

## Migration

### Update Dependency

**Go**:

```bash
go get github.com/fulmenhq/crucible@v0.2.6
go mod tidy
```

**TypeScript/Bun**:

```bash
bun add @fulmenhq/crucible@latest
```

**Python**:

```bash
uv add crucible@latest
```

### No Code Changes Required

This patch release fixes missing accessors and adds documentation. No migration steps needed for existing applications.

---

## Files Added

**Documentation**:

- Platform Introspection section in `docs/standards/library/modules/signal-handling.md`

---

## Files Changed

**Version Files**:

- `VERSION` (v0.2.5 â†’ v0.2.6)
- `package.json` (root, TypeScript, Python)

**Go Code**:

- `config.go` - Added `Signals()` and `ExitCodes()` accessors to `FoundryConfig`
- `config_test.go` - Added tests for new accessors

**Documentation**:

- `docs/standards/library/modules/signal-handling.md` - Added Platform Introspection section
- Synced to `lang/python/docs/` and `lang/typescript/docs/`

---

## Implementation Status

**v0.2.6 (This Release)**:

- âœ… Missing Foundry config accessors fixed
- âœ… Platform introspection API documented
- âœ… Test coverage for new accessors
- âœ… Documentation synced to language wrappers

**Helper Libraries (Next)**:

- ðŸ”œ gofulmen v0.1.x - Use Signals() accessor, implement SupportsSignal()
- ðŸ”œ pyfulmen v0.1.x - Use signals catalog via sync, implement supports_signal()
- ðŸ”œ tsfulmen v0.1.x - Use signals catalog via sync, implement supportsSignal()

---

## Related

- [CHANGELOG](../CHANGELOG.md) - Full version history
- [v0.2.5 Release Notes](v0.2.5.md) - Signal handling module introduction
- [Signal Handling Module Spec](../docs/standards/library/modules/signal-handling.md)
- [Signals Catalog](../config/library/foundry/signals.yaml)
- [Exit Codes Catalog](../config/library/foundry/exit-codes.yaml)

---

## Credits

**Implementation**: Schema Cartographer (AI agent, supervised by @3leapsdave)
**Feedback**: gofulmen and pyfulmen maintainer teams
**Review**: @3leapsdave

---

For questions or issues, see the [CHANGELOG](../CHANGELOG.md) or open an issue on GitHub.
