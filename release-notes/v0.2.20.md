# Crucible v0.2.20 - FulHash CRC Extension & Codegen

**Release Date**: 2025-11-21
**Version**: 0.2.20 (SemVer)
**Focus**: FulHash module expansion (CRC algorithms) and automated type safety

---

## ðŸŽ¯ Overview

Version 0.2.20 significantly enhances the **FulHash** module, the ecosystem standard for hashing and checksums. This release introduces support for CRC algorithms (critical for archive formats and cloud storage) and establishes a robust code generation pipeline for FulHash types, ensuring absolute consistency across Go, Python, and TypeScript helper libraries.

**Key Highlights**:

- âœ… **New Algorithms**: Added `crc32` (legacy/archive) and `crc32c` (cloud/hardware)
- âœ… **Automated Codegen**: Type-safe enums and structs generated from SSOT taxonomy
- âœ… **Convenience Interfaces**: Standardized `MultiHash` (single-pass I/O) and `Verify` patterns
- âœ… **Cross-Language Parity**: Zero-drift guarantee via automated regeneration

---

## ðŸš€ Added

### FulHash CRC Extension

Expanded the hashing algorithm taxonomy to support non-cryptographic use cases:

| Algorithm    | Description                           | Use Case                                                   |
| :----------- | :------------------------------------ | :--------------------------------------------------------- |
| **xxh3-128** | Fast non-cryptographic hash (Default) | Change detection, cache keys, file integrity (Pathfinder)  |
| **sha256**   | Cryptographic security standard       | Security verification, tamper detection, release artifacts |
| **crc32**    | 32-bit Cyclic Redundancy Check (IEEE) | Legacy interoperability (ZIP, GZIP, PNG)                   |
| **crc32c**   | 32-bit CRC (Castagnoli)               | Cloud storage verification (GCS, AWS), network protocols   |

### Automated Code Generation Pipeline

Similar to `fulpack` and `fulencode`, FulHash now uses a centralized "Taxonomy â†’ Code" pipeline:

1.  **Source**: `schemas/taxonomy/library/fulhash/algorithms/v1.0.0/algorithms.yaml` (New SSOT)
2.  **Generator**: `scripts/codegen/generate-fulhash-types.ts`
3.  **Templates**: Language-specific templates in `scripts/codegen/fulhash-types/`
4.  **Artifacts**:
    - **Go**: `fulhash/types.go` (Type-safe `Algorithm` string enum, `Digest` struct)
    - **Python**: `src/crucible/fulhash/types.py` (`StrEnum` for algorithms, `TypedDict` for digests)
    - **TypeScript**: `src/fulhash/types.ts` (String enums and interfaces)

### New Convenience Interfaces

Standardized two high-value patterns for helper library implementation:

- **`MultiHash(reader, algorithms[])`**: Calculates multiple digests in a single pass over the input stream. Essential for optimizing workflows that need both security (SHA256) and metadata (CRC32) checks without re-reading large files.
- **`Verify(reader, expected_digest)`**: Reduces boilerplate by accepting a `<algo>:<hex>` string and handling the parsing, hashing, and comparison logic internally.

---

## ðŸ”’ Changed

### Documentation

- **FulHash Standard** (`docs/standards/library/modules/fulhash.md`): Complete rewrite of the Algorithms section, added new interface definitions, and documented the codegen requirement.
- **Python Guidance**: Explicitly recommended `google-crc32c` dependency for performant CRC32C calculation in Python implementations.

---

## ðŸŽ¬ Downstream Impact

### Helper Libraries (gofulmen, pyfulmen, tsfulmen)

- **Action Required**: Run `make sync` to pull v0.2.20 artifacts.
- **Implementation**:
  - Replace manual `Algorithm` enums with generated types.
  - Implement CRC32/CRC32C logic.
  - Add `MultiHash` and `Verify` helpers.
- **Status**: All generated types have been previewed and approved by library maintainers.

---

## ðŸ“‹ Quality Gates

All quality gates passed:

- âœ… **Schema Validation**: All schemas validated
- âœ… **Code Generation**: FulHash types generated and verified for all languages
- âœ… **Sync**: Artifacts propagated to language wrappers
- âœ… **Build**: Go, TypeScript, Python builds passed
- âœ… **Linting**: Zero issues
- âœ… **Tests**: All test suites passed

---

## ðŸŽ¯ Related

- **Feature Brief**: `.plans/active/v0.2.20/fulhash-crc-extension-brief.md`
- **Taxonomy**: `schemas/taxonomy/library/fulhash/algorithms/v1.0.0/algorithms.yaml`
- **Standard**: `docs/standards/library/modules/fulhash.md`

---

**Generated by Schema Cartographer (@schema-cartographer) under supervision of @3leapsdave**
