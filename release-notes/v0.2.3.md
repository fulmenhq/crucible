# Release Notes: v0.2.3

**Date**: 2025-11-03

Major feature release adding web styling infrastructure, server management orchestration, and protocol-centric schema taxonomy. This release establishes the foundation for consistent server operations and web template styling across the Fulmen ecosystem.

## Highlights

- **Web Styling Module**: Schema-driven branding and styling for web templates
- **Server Management Module**: Orchestration for local dev/test/preview environments with reference implementation pattern
- **Protocol Namespace**: Clear taxonomy separating protocol contracts from operational concerns
- **Reference Harness Pattern**: Helper libraries ship orchestration infrastructure, applications configure commands

## What's New

### 1. Web Styling Module

Schema-driven approach to website branding and visual styling for web templates (Forge Codex Pulsar, future web forges).

**Schemas**:

- `schemas/web/branding/v1.0.0/site-branding.schema.json` - Site identity, logos, social links
- `schemas/web/styling/v1.0.0/site-styling.schema.json` - Typography, colors, themes, icons

**Configuration**:

- `config/web/branding/site-branding.yaml` - Default branding for Fulmen sites
- `config/web/styling/site-styling.yaml` - Default styling (Inter font, Lucide icons, light/dark themes)

**Architecture Guide**: `docs/architecture/fulmen-web-styling.md`

**Key Features**:

- **Theme Support**: Light and dark mode color palettes
- **Typography Systems**: Font families, weights, sizes with semantic tokens
- **Icon Systems**: Multiple icon sets (Lucide, Heroicons, etc.)
- **Accessibility**: Contrast requirements, focus indicators, motion preferences
- **Integration**: Designed for Astro/Starlight and future web frameworks

**Template Integration**:

- Templates read styling schemas from Crucible SSOT
- Generate CSS custom properties from styling config
- Apply branding (logos, site name, social links) during build
- Support user overrides via local config

---

### 2. Server Management Module

Server orchestration utilities for managing multiple server configurations (dev, test, a11y, preview, prod_like) with consistent port management, health checks, and lifecycle control.

**Schema**: `schemas/server/management/v1.0.0/server-management.schema.json`

**Configuration**: `config/server/management/server-management.yaml`

**Configuration Classes**:

- **dev**: Local development (port 3000-3099, verbose logging)
- **test**: Automated testing (port 3100-3199, predictable ports)
- **a11y**: Accessibility testing (port 4323-4340, dedicated range)
- **preview**: Feature branch preview (port 4300-4322, prod-like config)
- **prod_like**: Production-like testing (port 8000-8099, production settings)

**Architecture Guide**: `docs/architecture/fulmen-server-management.md`

**Module Spec**: `docs/standards/library/modules/server-management.md`

**Key Features**:

- **Port Management**: Preferred ports with fallback ranges, automatic discovery
- **Health Checks**: Retry logic, configurable timeouts, standardized response validation
- **Environment Overrides**: Pattern-based env vars (`${envPrefix}_${CONFIG}_PORT`)
- **PID File Management**: Process tracking for graceful shutdown
- **Exit Code Compliance**: Foundry exit codes (EXIT_PORT_IN_USE=11, EXIT_HEALTH_CHECK_FAILED=50)

**Reference Implementation Pattern**:

**Three-Layer Model**:

1. **Crucible (SSOT)**: Defines schemas, config structure, exit codes, requirements
2. **Helper Libraries**: Implement orchestration harnesses (CLI tools or packages)
   - TypeScript: `tsfulmen server start --config dev --command "bun run dev"`
   - Python: `pyfulmen server start --config dev --command "uvicorn app:app"`
   - Go: `gofulmen/server` package with orchestration functions
3. **Applications**: Configure server command, inherit consistent orchestration behavior

**Harness Responsibilities**:

- Read `server-management.yaml` from Crucible
- Resolve configuration for specified class
- Discover available port (check preferred, scan range)
- Start server with environment overrides
- Poll health endpoint with retry logic
- Write PID file for process management
- Exit with standardized codes

**Benefits**:

- **DRY**: Port logic written once per ecosystem, not per application
- **Centralized Fixes**: Bug in health check retry? Fix library, all apps benefit
- **Consistent Behavior**: Same exit codes, health patterns across all Fulmen servers

**Makefile Targets**: See `docs/standards/makefile-standard.md#annex-a-server-orchestration-targets`

- `make server-start-%` - Start server in configuration class
- `make server-stop-%` - Graceful shutdown (SIGTERM)
- `make server-status-%` - Check running and healthy
- `make server-restart-%` - Stop + start
- `make server-logs-%` - Display logs

---

### 3. Protocol Namespace Refactor

Established protocol-centric schema taxonomy to clarify that HTTP schemas define message contracts used by both clients and servers.

**Migration**: `schemas/api/http/` â†’ `schemas/protocol/http/`

**Rationale**:

- "API" is ambiguous (client API? server API?)
- "Protocol" clearly indicates wire format contracts
- Enables future request schemas alongside responses
- Separates protocol (messages) from operational concerns (server, client)

**Schema Changes**:

- Updated all $id URLs: `api/http` â†’ `protocol/http`
- 4 schemas updated: health-response, version-response, success-response, error-response
- No schema version bump (pre-launch timing, zero external consumers)

**Documentation**:

- Moved: `docs/standards/api/` â†’ `docs/standards/protocol/`
- Updated: `docs/standards/protocol/http-rest-standards.md`
- Added: Future schema roadmap (startup, liveness, readiness, metrics endpoints)

**Examples**: `examples/api/http/` â†’ `examples/protocol/http/`

**Namespace Model**:

- `schemas/protocol/http/` - Message contracts (request + response)
- `schemas/server/management/` - Server operational concerns
- `schemas/client/` - Reserved for SDK concerns (retry, auth, mocks - future)

**Change Memo**: `docs/ops/repository/memos/2025-11-03-api-to-protocol-schema-refactor.md`

**Why No Version Bump**:

- v0.2.3 not yet released
- Zero external consumers (Workhorse Groningen uncommitted)
- Schema content unchanged (only paths and $id URLs)
- Administrative reorganization, not content change

---

## Impact on Users

### For Template Developers (Forge Codex Pulsar)

**Web Styling**:

- Read styling schemas from Crucible, generate CSS custom properties
- Apply branding during build (logos, colors, typography)
- Support light/dark themes out of the box

**Server Management**:

- Implement Makefile targets using library harness (`tsfulmen server`)
- Configure server command, inherit orchestration (port discovery, health checks)
- Support multiple configuration classes for testing workflows

### For Helper Library Maintainers

**Server Management Module**:

- Implement orchestration harness (CLI or package) per ecosystem
- Read Crucible config, handle port/health/PID logic
- Export standardized interface for applications

**Protocol Schemas**:

- Update imports: `schemas/api/http/` â†’ `schemas/protocol/http/`
- Automatic via `make sync` for TypeScript/Python wrappers

### For Application Developers

**Server Orchestration**:

- Use standardized Makefile targets (`make server-start-dev`)
- Rely on consistent port discovery and health checks
- Benefit from centralized bug fixes in libraries

**Web Templates**:

- Customize branding/styling via local config overrides
- Inherit default Fulmen styling from Crucible

---

## Breaking Changes

**None** - This release contains zero breaking changes:

- Protocol namespace refactor pre-launch (no external consumers)
- New modules (web styling, server management) are additive
- Existing schemas, configs, and APIs unchanged

---

## Validation

**All quality gates passed**:

- âœ… Go tests: All passed
- âœ… TypeScript tests: 16/16 passed
- âœ… Python tests: 10/10 passed
- âœ… Schema validation: All schemas valid
- âœ… Lint: All languages passed (Biome, Ruff, golangci-lint)
- âœ… Format: All files formatted (goneat)
- âœ… Typecheck: TypeScript passed
- âœ… Sync: All assets synced to language wrappers
- âœ… Exit code generation: Parity verified across all languages

---

## Migration

### Update Dependency

**Go**:

```bash
go get github.com/fulmenhq/crucible@v0.2.3
go mod tidy
```

**TypeScript/Bun**:

```bash
bun add @fulmenhq/tsfulmen@latest
```

**Python**:

```bash
uv add pyfulmen@latest
```

### Schema Path Updates (if using HTTP schemas)

**TypeScript**:

```typescript
// Before
import healthSchema from "@fulmenhq/tsfulmen/schemas/api/http/v1.0.0/health-response.schema.json";

// After
import healthSchema from "@fulmenhq/tsfulmen/schemas/protocol/http/v1.0.0/health-response.schema.json";
```

**Python**:

```python
# Before
from pyfulmen.schemas.api.http.v1_0_0 import health_response_schema

# After
from pyfulmen.schemas.protocol.http.v1_0_0 import health_response_schema
```

**Go** (embeds directly, automatic):

```go
// No changes needed - embeds from Crucible root
```

---

## Files Added

**Schemas**:

- `schemas/web/branding/v1.0.0/site-branding.schema.json`
- `schemas/web/styling/v1.0.0/site-styling.schema.json`
- `schemas/server/management/v1.0.0/server-management.schema.json`
- `schemas/protocol/http/v1.0.0/` (4 schemas moved from api/http)

**Configuration**:

- `config/web/branding/site-branding.yaml`
- `config/web/styling/site-styling.yaml`
- `config/server/management/server-management.yaml`

**Documentation**:

- `docs/architecture/fulmen-web-styling.md` - Web styling architecture
- `docs/architecture/fulmen-server-management.md` - Server management architecture
- `docs/standards/library/modules/server-management.md` - Module spec with reference implementation pattern
- `docs/standards/protocol/` - Protocol standards (http-rest-standards.md, grpc-standards.md)
- `docs/standards/makefile-standard.md` - Added Annex A for server orchestration targets
- `docs/ops/repository/memos/2025-11-03-api-to-protocol-schema-refactor.md` - Change memo
- `docs/guides/consuming-crucible-assets.md` - Guide for consuming SSOT assets

**Examples**:

- `examples/protocol/http/v1.0.0/` (4 examples moved from api/http)

---

## Files Removed

**Schemas**:

- `schemas/api/http/` â†’ `schemas/protocol/http/` (moved, not deleted)

**Documentation**:

- `docs/standards/api/` â†’ `docs/standards/protocol/` (moved, not deleted)

**Examples**:

- `examples/api/http/` â†’ `examples/protocol/http/` (moved, not deleted)

---

## Implementation Status

**v0.2.3 (This Release)**:

- âœ… Web styling schemas and config (SSOT established)
- âœ… Server management schemas and config (SSOT established)
- âœ… Protocol namespace taxonomy (schemas migrated)
- âœ… Architecture guides and module specs (documentation complete)
- âœ… Makefile targets annex (standards documented)

**v0.2.4+ (Planned)**:

- ðŸ”œ Helper library implementations (tsfulmen, pyfulmen, gofulmen server modules)
- ðŸ”œ Forge Codex Pulsar integration (web styling, server orchestration)
- ðŸ”œ Additional protocol schemas (startup, liveness, readiness, metrics endpoints)

---

## Related

- [CHANGELOG](../CHANGELOG.md) - Full version history
- [Fulmen Web Styling Architecture](../docs/architecture/fulmen-web-styling.md)
- [Fulmen Server Management Architecture](../docs/architecture/fulmen-server-management.md)
- [Server Management Module Spec](../docs/standards/library/modules/server-management.md)
- [Makefile Standard - Annex A](../docs/standards/makefile-standard.md#annex-a-server-orchestration-targets)
- [Protocol HTTP REST Standards](../docs/standards/protocol/http-rest-standards.md)
- [API to Protocol Refactor Memo](../docs/ops/repository/memos/2025-11-03-api-to-protocol-schema-refactor.md)

---

## Credits

**Implementation**: Schema Cartographer (AI agent, supervised by @3leapsdave)
**Review**: @3leapsdave

---

For questions or issues, see the [CHANGELOG](../CHANGELOG.md) or open an issue on GitHub.
