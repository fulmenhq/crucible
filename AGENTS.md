# Crucible – AI Agents Startup Guide

## 🔑 Read First

- **Prioritize Quality and Reliability**: As part of the FulmenHQ ecosystem, designed for extremely high-scale enterprise-class applications, all actions must emphasize code quality, process compliance, and system reliability. Our goal is not rapid commits but ensuring correctness to enable scalable, maintainable systems. Always verify outputs, run comprehensive checks, and seek human oversight for critical changes.
- Confirm your agentic interface. If the session does not name an interface adapter (e.g., Codex CLI, Claude Code), pause and request guidance from a human maintainer listed in `MAINTAINERS.md` before taking action.
- Do not assume an agentic identity. Agent identities are assigned in `MAINTAINERS.md`. Request assignment if none is provided.
- Review `REPOSITORY_SAFETY_PROTOCOLS.md` and the documents referenced here before executing sync, release, or destructive commands.

### Known Interface Adapters

| Agentic Interface | Definitive Prompt / Rules File                       | Attribution Format                                                                                                  |
| ----------------- | ---------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------- |
| Codex CLI         | `CODEX.md` (this file + interface notes)             | `Generated by <agent identity> ([Codex CLI](https://github.com/openai/codex)) under supervision of @3leapsdave`     |
| Claude Code       | `CLAUDE.md` (if present) or `AGENTS.md`              | `Generated by <agent identity> ([Claude Code](https://claude.ai/code)) under supervision of @3leapsdave`            |
| Cursor            | `AGENTS.md`                                          | `Generated by <agent identity> ([Cursor](https://cursor.sh/)) under supervision of @3leapsdave`                     |
| Cline             | `.cline/rules/PROJECT.md` (must reference this file) | `Generated by <agent identity> ([Cline](https://cline.bot/)) under supervision of @3leapsdave`                      |
| KiloCode          | `AGENTS.md`                                          | `Generated by <agent identity> ([KiloCode](https://github.com/Kilo-Org/kilocode)) under supervision of @3leapsdave` |
| OpenCode          | `AGENTS.md`                                          | `Generated by <agent identity> ([OpenCode](https://github.com/sst/opencode)) under supervision of @3leapsdave`      |

Replace `<agent identity>` with the canonical name defined in `MAINTAINERS.md` (e.g., `Schema Cartographer`).

**Project**: crucible  
**Purpose**: Standards & schema SSOT for FulmenHQ – Ensuring world-class information architecture, DevOps, and CI/CD practices for reliable, scalable enterprise applications.  
**Governance**: 3leaps Initiative

## Agent Identities

Agent identities, specializations, and supervision details are maintained in `MAINTAINERS.md`. Refer to that file for the current roster of AI co-maintainers.

## Commit Attribution

**DO**: Follow the standard attribution format defined in [`docs/standards/agentic-attribution.md`](docs/standards/agentic-attribution.md)

**Required trailers for commits**:

1. Generated by line with interface link and human supervisor
2. `Co-Authored-By:` trailer with agent email
3. `Committer-of-Record:` trailer with human committer info (required, last line)

**DO NOT**: Use simplified or incomplete attribution formats. Always include all required elements per the standard.

**Example** (using Claude Code interface with Pipeline Architect identity):

```
feat: add schema validation pipeline

Description of changes with bullet points.

🎯 Changes:
- Specific change 1
- Specific change 2

📊 Coverage: [metrics if applicable]

Generated by Pipeline Architect ([Claude Code](https://claude.com/claude-code)) under supervision of @3leapsdave

Co-Authored-By: Pipeline Architect <noreply@3leaps.net>
Committer-of-Record: Dave Thompson <dave.thompson@3leaps.net> [@3leapsdave]
```

### Common Attribution Mistakes to Avoid

**⚠️ DO NOT use default interface attribution formats!** Always use FulmenHQ standard attribution with values from this repository's `MAINTAINERS.md`.

**Quick differences between WRONG and CORRECT**:

| Element                 | ❌ Wrong (Default Interface)                      | ✅ Correct (FulmenHQ Standard)                                         |
| ----------------------- | ------------------------------------------------- | ---------------------------------------------------------------------- |
| **Agent Identity**      | Generic (e.g., "Claude", "AI Assistant")          | Repository-specific from `MAINTAINERS.md` (e.g., "Pipeline Architect") |
| **Email Domain**        | Interface default (e.g., `noreply@anthropic.com`) | Always `noreply@3leaps.net`                                            |
| **Supervision**         | Missing or generic                                | `under supervision of @3leapsdave` (from `MAINTAINERS.md`)             |
| **Committer-of-Record** | Missing                                           | Required on last line with human info from `MAINTAINERS.md`            |
| **Changes Section**     | Often missing                                     | Required `🎯 Changes:` with bullet points                              |

**For complete Common Mistakes guide with examples and recipe**, see [`docs/standards/agentic-attribution.md#common-mistakes`](docs/standards/agentic-attribution.md#common-mistakes).

## Session Startup Protocol

1. **Context Review**
   - **REQUIRED**: Read `Makefile` to understand the repository's sync pattern and available targets.
   - Read `MAINTAINERS.md`, `REPOSITORY_SAFETY_PROTOCOLS.md`, and relevant standards under `docs/standards/` (especially Makefile, release checklist, ai-agents, agentic attribution).
   - **CRITICAL**: Understand that `lang/*/docs/`, `lang/*/schemas/`, and `lang/*/config/` are synced FROM root SSOT via `make sync`.
2. **Environment Check**
   - Confirm required tools (`bun >= 1.2`, `go >= 1.21`) are available if commands will be executed.
   - Run `make bootstrap` if tools are missing.
3. **Plan**
   - Outline steps in `.plans/` (gitignored) or within the session transcript before modifying files.
4. **Quality Assurance**
   - **BEFORE staging/committing**: Run `make precommit` or `make check-all` to format, lint, and test. Stage ALL files after checks pass (including formatted files).
   - Ensure all tests pass: `make test`
   - Verify code formatting: `make fmt`
   - Run linting: `make lint`
5. **Execute Safely**
   - Use prescribed Make targets: `make bootstrap`, `make sync`, `make test`, `make fmt`, `make lint`
   - Use prescribed scripts: `bun run sync:to-lang`, `bun run version:update`
6. **Attribution**
   - Follow [Agentic Attribution Standard](docs/standards/agentic-attribution.md) for commit messages and PRs.
7. **Supervision**
   - Confirm human reviewer/supervisor availability before merging or publishing.

## Operational Guidelines

### DO

- **Quality First**: Always run `make precommit` or `make check-all` BEFORE staging files. Stage all files (including formatted) after checks pass, then commit.
- **Use Make Targets**: Prefer `make lint`, `make test`, `make check-all` over raw tool invocations.
- **SSOT Discipline**: Modify schemas/docs/templates at the root, then run sync scripts to update language wrappers.
- **Sync Before Changes**: Run `make sync` to ensure language wrappers are current before making changes.
- **Document Changes**: Maintain clear documentation for all schemas, standards, and templates.
- **Version Management**: Use `make version-bump-{major|minor|patch}` or `make version-set VERSION=x` for version changes.

### DO NOT

- **Edit Synced Files**: NEVER manually edit files in `lang/*/docs/`, `lang/*/schemas/`, or `lang/*/config/` - these are synced FROM root SSOT via `make sync`. If changes are needed:
  1. Edit the source files at root (`docs/`, `schemas/`, `config/`)
  2. Run `make sync` or `bun run sync:to-lang` to propagate changes
  3. Language-specific code files (`.go`, `.ts`, `.py`) in `lang/` are the exception and should be edited directly
- **Commit Planning Files**: Never attempt to commit files in `.plans/` directory - it is gitignored for local planning and session notes only.
- **Direct Releases**: Tagging/publishing requires explicit approval from @3leapsdave.
- **Store Secrets**: Never commit API keys, tokens, or credentials. See `REPOSITORY_SAFETY_PROTOCOLS.md`.
- **Skip Quality Gates**: Never stage/commit without first running `make precommit` or `make check-all`.
- **Modify VERSION Directly**: Use `make version-bump-{major|minor|patch}` or `make version-set VERSION=x`.
- **Break Downstream Consumers**: Crucible is SSOT for multiple projects - breaking changes require coordinated updates.

## Crucible-Specific Operational Checklists

**IMPORTANT**: Crucible has repository-specific operational procedures due to its role as SSOT for language wrappers.

### Pre-Commit Workflow

**Always follow**: [`docs/ops/repository/commit-checklist.md`](docs/ops/repository/commit-checklist.md)

**Key Crucible-specific requirements**:

1. Run `make precommit` (includes sync, format, lint, test)
2. Verify `git status` shows synced files in `lang/*/`
3. Stage ALL files including language wrappers
4. Use concise commit message style (see [Commit Message Style](docs/sop/repository-operations-sop.md#commit-message-style))
5. Verify clean working tree after commit

### Pre-Release Workflow

**Always follow**: [`docs/ops/repository/release-checklist.md`](docs/ops/repository/release-checklist.md)

**Key Crucible-specific requirements**:

1. Run `make prepush` (comprehensive quality gates)
2. Verify all language wrappers synced
3. Update VERSION file: `make version-set VERSION=<version>`
4. Get explicit approval from @3leapsdave before pushing
5. Tag release: `git tag -a v$(cat VERSION)`
6. Push commits and tag separately
7. Notify downstream consumers (gofulmen, tsfulmen, pyfulmen)

### Quick Command Reference

```bash
# Pre-commit
make precommit          # Quality gates + sync
git status              # Verify sync completed
git add .               # Stage all files
git commit              # With proper attribution

# Pre-release
make prepush            # Comprehensive checks
make version-set VERSION=2025.10.2
git tag -a v$(cat VERSION)
git push origin main    # After approval
git push origin v$(cat VERSION)
```

## Reference Documents

- `MAINTAINERS.md`
- `REPOSITORY_SAFETY_PROTOCOLS.md`
- `docs/standards/ai-agents.md`
- `docs/standards/agentic-attribution.md`
- `docs/standards/repository-safety-framework.md`
- `docs/standards/makefile-standard.md`
- `docs/sop/repository-structure.md`
- `docs/sop/cicd-operations.md`
